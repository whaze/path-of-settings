(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var s in a)e.o(a,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:a[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,a=window.wp.element,s=window.wp.i18n,n=window.wp.apiFetch;var l=e.n(n);const o=window.wp.components,r={text:({id:e,label:a,description:s,placeholder:n,value:l,onChange:r,error:i})=>(0,t.createElement)("div",{className:"pos-field pos-field-text"},(0,t.createElement)(o.TextControl,{label:a,help:i||s,value:l||"",onChange:r,placeholder:n,className:i?"has-error":""})),select:({id:e,label:a,description:s,options:n,value:l,onChange:r,error:i})=>{const c=Object.entries(n).map((([e,t])=>({value:e,label:t})));return(0,t.createElement)("div",{className:"pos-field pos-field-select"},(0,t.createElement)(o.SelectControl,{label:a,help:i||s,value:l||"",options:c,onChange:r,className:i?"has-error":""}))},checkbox:({id:e,label:a,description:s,value:n,onChange:l,error:r})=>(0,t.createElement)("div",{className:"pos-field pos-field-checkbox"},(0,t.createElement)(o.CheckboxControl,{label:a,help:r||s,checked:!!n,onChange:l,className:r?"has-error":""})),textarea:({id:e,label:a,description:s,placeholder:n,rows:l,value:r,onChange:i,error:c})=>(0,t.createElement)("div",{className:"pos-field pos-field-textarea"},(0,t.createElement)(o.TextareaControl,{label:a,help:c||s,value:r||"",onChange:i,placeholder:n,rows:l||5,className:c?"has-error":""}))},i=()=>{const[e,n]=(0,a.useState)({}),[i,c]=(0,a.useState)(!0),[d,p]=(0,a.useState)(!1),[m,u]=(0,a.useState)(null),[g,h]=(0,a.useState)({}),f=window.posData?.currentPage||null;(0,a.useEffect)((()=>{f?v():c(!1)}),[f]);const v=async()=>{if(f){c(!0);try{const e=await l()({path:`/pos/v1/settings/${f.id}`,method:"GET"});n(e),h({}),u(null)}catch(e){console.error("Failed to load settings:",e),u({status:"error",message:(0,s.__)("Failed to load settings.","path-of-settings")})}finally{c(!1)}}};return f?i?(0,t.createElement)("div",{className:"pos-loading"},(0,t.createElement)(o.Spinner,null),(0,t.createElement)("p",null,(0,s.__)("Loading settings...","path-of-settings"))):(0,t.createElement)("div",{className:"pos-settings-page"},(0,t.createElement)("h1",null,f.title),m&&(0,t.createElement)(o.Notice,{status:m.status,onRemove:()=>u(null)},m.message),(0,t.createElement)(o.Panel,null,(0,t.createElement)(o.PanelBody,{title:(0,s.__)("Settings","path-of-settings"),initialOpen:!0},f.fields.map((a=>{const l=r[a.type];if(!l)return(0,t.createElement)(o.PanelRow,{key:a.id},(0,t.createElement)(o.Notice,{status:"error",isDismissible:!1},(0,s.__)(`Unknown field type: ${a.type}`,"path-of-settings")));const i=void 0!==e[a.id]?e[a.id]:a.config.default;return(0,t.createElement)(o.PanelRow,{key:a.id},(0,t.createElement)(l,{id:a.id,value:i,onChange:t=>((t,a)=>{n({...e,[t]:a})})(a.id,t),error:g[a.id],...a.config}))})))),(0,t.createElement)("div",{className:"pos-actions"},(0,t.createElement)(o.Button,{isPrimary:!0,onClick:async()=>{if(f){p(!0);try{const t=await l()({path:`/pos/v1/settings/${f.id}`,method:"POST",data:e});n(t),h({}),u({status:"success",message:(0,s.__)("Settings saved successfully.","path-of-settings")})}catch(e){console.error("Failed to save settings:",e),e.data?.errors&&h(e.data.errors),u({status:"error",message:(0,s.__)("Failed to save settings.","path-of-settings")})}finally{p(!1)}}},isBusy:d,disabled:d},d?(0,s.__)("Saving...","path-of-settings"):(0,s.__)("Save Settings","path-of-settings")))):(0,t.createElement)(o.Notice,{status:"error",isDismissible:!1},(0,s.__)("No page configuration found.","path-of-settings"))};document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("pos-app");e&&(0,a.createRoot)(e).render((0,t.createElement)(i,null))}))})();